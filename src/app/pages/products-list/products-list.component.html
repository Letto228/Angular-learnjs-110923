<div class="scroll-container" *ngIf="products$ | async as products; else loaderTemplate">
  <input (keydown)="onInputChange($event)" matInput />
  <ng-container
    *appPagination="
      let productsGroup of products | findItemByName : findProductByName;
      chankSize: 4;
      let pageIndexes = pageIndexes;
      let activeIndex = index;
      let next = next;
      let back = back;
      let selectIndex = selectIndex
    ">
    <div class="cards">
      <app-card class="card" *ngFor="let product of productsGroup; trackBy: trackById" [product]="product"></app-card>
    </div>
    <div class="pagination">
      <button (click)="back()" mat-icon-button>
        <mat-icon>chevron_left</mat-icon>
      </button>
      <div class="pagination__page-number-container">
        <button
          class="pagination__page-number"
          *ngFor="let index of pageIndexes"
          [class.pagination__page-number_active]="activeIndex === index"
          (click)="selectIndex(index)"
          mat-icon-button>
          {{ index + 1 }}
        </button>
      </div>
      <button (click)="next()" mat-icon-button>
        <mat-icon>chevron_right</mat-icon>
      </button>
    </div>
  </ng-container>
</div>

<ng-template #loaderTemplate>
  <mat-spinner></mat-spinner>
</ng-template>
